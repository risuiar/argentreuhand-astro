---
export const prerender = true;
import "@/styles/globals.css";
import Layout from "../layouts/Layout.astro";
import Header from "../components/Header.astro";
import CalComBooking from "../components/CalComBooking";
import Footer from "../components/Footer";
import { getLangFromUrl, translations } from "../lib/i18n";
import { fetchConsultationData } from "../utils/consultation";

const lang = getLangFromUrl(Astro.url);
const t = translations[lang];

let consultationData = null;
try {
  consultationData = await fetchConsultationData(lang);
} catch (error) {
  console.error("Error fetching consultation data:", error);
}
---

<Layout
  title={consultationData?.title || "Reservar Consulta - Argenta Treuhand"}
>
  <Header />

  <main
    class="min-h-screen bg-gradient-to-br from-brand-blue/5 via-white to-slate-50 py-20"
  >
    <div class="container mx-auto px-4">
      <CalComBooking
        lang={lang}
        translations={t}
        consultationData={consultationData}
        client:load
      />
    </div>
  </main>

  <Footer lang={lang} />
</Layout>
